{"ast":null,"code":"import _toConsumableArray from\"/Users/andrewkusakin/Documents/WGU/d424-software-engineering-capstone/src/main/UI/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/andrewkusakin/Documents/WGU/d424-software-engineering-capstone/src/main/UI/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/andrewkusakin/Documents/WGU/d424-software-engineering-capstone/src/main/UI/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/andrewkusakin/Documents/WGU/d424-software-engineering-capstone/src/main/UI/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import CloseIcon from\"@mui/icons-material/Close\";import{Link,useParams}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function EditGallery(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),photoList=_useState2[0],setPhotoList=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),gallery=_useState4[0],setGallery=_useState4[1];var _useState5=useState(localStorage.getItem(\"authUserId\")),_useState6=_slicedToArray(_useState5,2),userId=_useState6[0],setUserId=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),name=_useState8[0],setName=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),description=_useState10[0],setDescription=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),password=_useState12[0],setPassword=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),photoUrl=_useState14[0],setPhotoUrl=_useState14[1];var _useParams=useParams(),id=_useParams.id;var fetchGallery=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/mygallery\",{params:{id:id,userId:userId}});case 3:response=_context.sent;setGallery(response.data);setName(response.data.name);setDescription(response.data.description);setPassword(response.data.password);setPhotoList(response.data.pictures.map(function(p){return p.url;}));_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}));return function fetchGallery(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchGallery();},[]);var addPhoto=function addPhoto(){setPhotoList(function(prevList){return[].concat(_toConsumableArray(prevList),[photoUrl]);});setPhotoUrl(\"\");};function updateGallery(e){e.preventDefault();console.log(\"updateGallery\");var galleryData={id:id,userId:userId,name:name,description:description,password:password,pictures:photoList};axios.put(\"/updategallery\",galleryData).then(function(res){console.log(\"Succesfully updated\",res.data);window.location.href=\"/dashboard\";}).catch(function(error){return console.error(error);});}var PhotoItem=function PhotoItem(_ref2){var url=_ref2.url,index=_ref2.index;return/*#__PURE__*/_jsxs(\"div\",{className:\"grid-item-photolist\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"create-gallery-photo\",src:url,alt:\"photo\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setPhotoList(photoList.filter(function(_,i){return i!==index;}));},className:\"delete-button\",children:/*#__PURE__*/_jsx(CloseIcon,{className:\"close-icon-small\",fontSize:\"small\"})})]});};return/*#__PURE__*/_jsx(\"div\",{className:\"create-gallery-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"create-gallery-window\",children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"create-gallery-close\",children:/*#__PURE__*/_jsx(CloseIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsxs(\"form\",{className:\"create-gallery-form\",onSubmit:updateGallery,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Gallery Name\",autoComplete:\"username\",type:\"text\",value:name,onChange:function onChange(e){return setName(e.target.value);},required:true,className:\"input-field\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Description\",autoComplete:\"Description\",type:\"text\",value:description,onChange:function onChange(e){return setDescription(e.target.value);},className:\"input-field\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Incorporate a password security measure for your gallery, ensuring that the gallery's content can be accessed only upon entering the correct password. If you wish for your gallery to be publicly accessible without the necessity of a password, simply leave the password field blank.\",\" \"]}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Gallery Password\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},className:\"input-field\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Link to Photo\",type:\"url\",value:photoUrl,onChange:function onChange(e){return setPhotoUrl(e.target.value);},className:\"input-field\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addPhoto,className:\"submit-btn\",children:\"Add Photo\"}),/*#__PURE__*/_jsx(\"div\",{className:\"photo-list\",children:/*#__PURE__*/_jsx(\"div\",{className:\"photo-list-grid\",children:photoList.map(function(photoUrl,index){return/*#__PURE__*/_jsx(PhotoItem,{url:photoUrl,index:index},index);})})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",children:\"Save Gallery\"})]})]})});}","map":{"version":3,"names":["React","useEffect","useState","CloseIcon","Link","useParams","axios","jsx","_jsx","jsxs","_jsxs","EditGallery","_useState","_useState2","_slicedToArray","photoList","setPhotoList","_useState3","_useState4","gallery","setGallery","_useState5","localStorage","getItem","_useState6","userId","setUserId","_useState7","_useState8","name","setName","_useState9","_useState10","description","setDescription","_useState11","_useState12","password","setPassword","_useState13","_useState14","photoUrl","setPhotoUrl","_useParams","id","fetchGallery","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","params","sent","data","pictures","map","p","url","t0","console","error","stop","apply","arguments","addPhoto","prevList","concat","_toConsumableArray","updateGallery","e","preventDefault","log","galleryData","put","then","res","window","location","href","catch","PhotoItem","_ref2","index","className","children","src","alt","onClick","filter","_","i","fontSize","to","onSubmit","placeholder","autoComplete","type","value","onChange","target","required"],"sources":["/Users/andrewkusakin/Documents/WGU/d424-software-engineering-capstone/src/main/UI/src/components/editGallery/EditGallery.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport { Link, useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { Gallery, Photo } from \"../interfaces\";\n\nexport default function EditGallery() {\n  const [photoList, setPhotoList] = useState<string[]>([]);\n  const [gallery, setGallery] = useState<Gallery>();\n  const [userId, setUserId] = useState(localStorage.getItem(\"authUserId\"));\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [photoUrl, setPhotoUrl] = useState(\"\");\n    const { id } = useParams();\n\n  const fetchGallery = async () => {\n    try {\n      const response = await axios.get(\"/mygallery\", {\n        params: {\n          id,\n          userId,\n        },\n      });\n      setGallery(response.data);\n      setName(response.data.name);\n      setDescription(response.data.description);\n      setPassword(response.data.password);\n      setPhotoList(response.data.pictures.map((p: Photo) => p.url));\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  useEffect(() => {\n    fetchGallery();\n  }, []);\n\n  const addPhoto = () => {\n    setPhotoList((prevList) => [...prevList, photoUrl]);\n    setPhotoUrl(\"\");\n  };\n\n  function updateGallery(e: { preventDefault: () => void }) {\n    e.preventDefault();\nconsole.log(\"updateGallery\");\n    const galleryData = {\n        id,\n      userId,\n      name,\n      description,\n      password,\n      pictures: photoList,\n    };\n\n    axios\n      .put(\"/updategallery\", galleryData)\n      .then((res) => {\n        console.log(\"Succesfully updated\", res.data);\n        window.location.href = \"/dashboard\";\n      })\n      .catch((error) => console.error(error));\n  }\n\n  \n\n  const PhotoItem = ({ url, index }: { url: string; index: number }) => (\n    <div className=\"grid-item-photolist\">\n      <img className=\"create-gallery-photo\" src={url} alt=\"photo\" />\n      <button\n        onClick={() => setPhotoList(photoList.filter((_, i) => i !== index))}\n        className=\"delete-button\"\n      >\n        <CloseIcon className=\"close-icon-small\" fontSize=\"small\" />\n      </button>\n    </div>\n  );\n\n  return (\n    <div className=\"create-gallery-wrapper\">\n      <div className=\"create-gallery-window\">\n        <Link to=\"/dashboard\" className=\"create-gallery-close\">\n          <CloseIcon fontSize=\"large\" />\n        </Link>\n        <form className=\"create-gallery-form\" onSubmit={updateGallery}>\n      <input\n        placeholder=\"Gallery Name\"\n        autoComplete=\"username\"\n        type=\"text\"\n        value={name}\n        onChange={(e) => setName(e.target.value)}\n        required\n        className=\"input-field\"\n      />\n\n      <input\n        placeholder=\"Description\"\n        autoComplete=\"Description\"\n        type=\"text\"\n        value={description}\n        onChange={(e) => setDescription(e.target.value)}\n        className=\"input-field\"\n      />\n      <label>\n        Incorporate a password security measure for your gallery, ensuring that\n        the gallery's content can be accessed only upon entering the correct\n        password. If you wish for your gallery to be publicly accessible without\n        the necessity of a password, simply leave the password field blank.{\" \"}\n      </label>\n      <input\n        placeholder=\"Gallery Password\"\n        type=\"password\"\n        value={password}\n        onChange={(e) => setPassword(e.target.value)}\n        className=\"input-field\"\n      />\n\n      <input\n        placeholder=\"Link to Photo\"\n        type=\"url\"\n        value={photoUrl}\n        onChange={(e) => setPhotoUrl(e.target.value)}\n        className=\"input-field\"\n      />\n      <button type=\"button\" onClick={addPhoto} className=\"submit-btn\">\n        Add Photo\n      </button>\n      <div className=\"photo-list\">\n      <div className=\"photo-list-grid\">\n        {photoList.map((photoUrl, index) => (\n          <PhotoItem key={index} url={photoUrl} index={index} />\n        ))}\n      </div>\n    </div>\n\n      <button type=\"submit\" className=\"submit-btn\">\n        Save Gallery\n      </button>\n    </form>\n      </div>\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}